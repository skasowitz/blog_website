{
  "hash": "951cd4988e06417f099a1fbf062357f5",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"TidyTuesday 2026 - Week 1\"\ndescription: \"Quick exploration and visualization of reservoirs in the New York City water system\"\ndate: \"2026-01-07\"\nimage: featured.png\nimage-alt: Yearly storage patterns at NYC reservoirs between 2017 and early autumn 2025.\ncategories:\n  - TidyTuesday\n  - Data visualization\n  - R\n  - ggplot2\ntoc: true\nnumber-sections: true\ncitation: true\nformat:\n  html:\n    code-fold: true\n    code-summary: \"Show the code\"\nexecute:\n  echo: true\n  warning: false\n---\n\nThe first TidyTuesday of 2026 starts off with a \"Bring Your Own Data\" week. I grabbed [reservoir level data]('https://data.cityofnewyork.us/Environment/Current-Reservoir-Levels/') for the City of New York.\n\n## Load data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\nnyc_reservoirs <- read_csv(\n  'Current_Reservoir_Levels.csv'\n)\nglimpse(nyc_reservoirs)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 2,866\nColumns: 25\n$ Point_time       <chr> \"02/01/2019\", \"02/02/2019\", \"02/03/2019\", \"02/04/2019…\n$ AUGEVolume       <dbl> 75.04, 74.48, 73.88, 73.31, 72.76, 72.26, 71.79, 71.3…\n$ AUGEASTLEVANALOG <dbl> 585.17, 584.98, 584.62, 584.26, 583.90, 583.55, 583.2…\n$ AUGWVOLUME       <dbl> 39.67, 39.50, 39.34, 39.17, 39.19, 39.52, 40.15, 41.3…\n$ AUGWESTLEVANALOG <dbl> 584.65, 584.38, 584.21, 584.04, 583.85, 583.88, 584.2…\n$ ASHREL           <dbl> 619, 619, 598, 586, 584, 583, 443, 412, 412, 412, 409…\n$ SICRESVOLUME     <dbl> 16.81, 16.82, 16.84, 16.93, 17.16, 17.25, 17.41, 17.4…\n$ SICRESELEVANALOG <dbl> 1125.75, 1125.75, 1125.75, 1125.81, 1126.03, 1126.70,…\n$ STPALBFLW        <dbl> 48.3, 64.6, 68.1, 62.5, 57.5, 49.4, 20.8, 5.3, 1.5, 1…\n$ RECRESVOLUME     <dbl> 47.33, 47.19, 47.09, 46.99, 46.96, 47.09, 47.37, 47.7…\n$ RECRESELEVANALOG <dbl> 836.77, 836.57, 836.42, 836.27, 836.20, 836.42, 836.8…\n$ RECREL           <dbl> 10.21, 10.21, 10.19, 10.20, 10.19, 10.19, 10.17, 10.1…\n$ NICRESVOLUME     <dbl> 35.21, 35.21, 35.22, 35.23, 35.27, 35.28, 35.42, 35.4…\n$ NICRESELEVANALOG <dbl> 1440.08, 1440.09, 1440.10, 1440.12, 1440.19, 1440.21,…\n$ NICNTHFLW        <dbl> 58.0, 58.1, 58.1, 58.1, 58.0, 58.1, 58.0, 58.0, 57.9,…\n$ NICSTHFLW        <dbl> 64.8, 64.8, 64.8, 64.9, 64.9, 64.9, 64.9, 65.0, 65.0,…\n$ NICCONFLW        <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ EDIRESVOLUME     <dbl> 142.01, 141.62, 141.25, 140.94, 140.92, 141.22, 142.2…\n$ EDIRESELEVANALOG <dbl> 1279.56, 1279.35, 1279.15, 1278.98, 1278.97, 1279.13,…\n$ EDRNTHFLW        <dbl> 225.8, 225.9, 225.7, 225.7, 225.8, 225.7, 225.7, 225.…\n$ EDRSTHFLW        <dbl> 225.6, 226.1, 226.0, 225.6, 225.5, 225.8, 226.3, 226.…\n$ EDRCONFLW        <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ WDIRESVOLUME     <dbl> 88.91, 88.49, 88.16, 87.91, 88.24, 88.64, 89.94, 92.3…\n$ WDIRESELEVANALOG <dbl> 1146.33, 1146.05, 1145.83, 1145.66, 1145.88, 1146.15,…\n$ WDRFLW           <dbl> 959.2, 967.4, 965.7, 966.5, 960.3, 964.2, 965.6, 966.…\n```\n\n\n:::\n:::\n\n\nThe data set contains daily measurements for nearly 8 years.\n\nThere are three types of values:\n\n-   Storage Volume in billions of gallons (BG)\n\n-   Elevation in feet\n\n-   Release in millions of gallons per day (MGD)\n\n    ## Wrangle for plotting\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- nyc_reservoirs |>\n  mutate(date = mdy(Point_time)) |>\n  rename(\n    \"Ashokan East Storage\" = AUGEVolume,\n    \"Ashokan East Elevation\" = AUGEASTLEVANALOG,\n    \"Ashokan West Elevation\" = AUGWVOLUME,\n    \"Ashokan West Storage\" = AUGWESTLEVANALOG,\n    \"Ashokan Release\" = ASHREL,\n    \"Schoharie Storage\" = SICRESVOLUME,\n    \"Schoharie Elevation\" = SICRESELEVANALOG,\n    \"Schoharie Release\" = STPALBFLW,\n    \"Rondout Storage\" = RECRESVOLUME,\n    \"Rondout Elevation\" = RECRESELEVANALOG,\n    \"Rondout Release\" = RECREL,\n    \"Neversink Storage\" = NICRESVOLUME,\n    \"Neversink Elevation\" = NICRESELEVANALOG,\n    \"Neversink North Flow Release\" = NICNTHFLW,\n    \"Neversink South Flow Release\" = NICSTHFLW,\n    \"Neversink Conservation Flow Release\" = NICCONFLW,\n    \"Pepacton Storage\" = EDIRESVOLUME,\n    \"Pepacton Elevation\" = EDIRESELEVANALOG,\n    \"Pepacton North Flow Release\" = EDRNTHFLW,\n    \"Pepacton South Flow Release\" = EDRSTHFLW,\n    \"Pepacton Conservation Flow Release\" = EDRCONFLW,\n    \"Cannonsville Storage\" = WDIRESVOLUME,\n    \"Cannonsville Elevation\" = WDIRESELEVANALOG,\n    \"Cannonsville Release\" = WDRFLW\n  ) |>\n  pivot_longer(\n    -c(Point_time, date),\n    names_to = 'reservoir',\n    values_to = 'values'\n  ) |>\n  extract(\n    reservoir,\n    into = c('reservoir', 'type'),\n    regex = '^(.+)\\\\s+(.+?)$'\n  )\n```\n:::\n\n\n### Create a data frame with storage data for a seasonal plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstorage_data <- df |>\n  filter(type == \"Storage\") |>\n  mutate(year = year(date),\n         month = month(date, label = TRUE))\n```\n:::\n\n\n## Plotting\n\n### Data quality check\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(storage_data, aes(x = reorder(reservoir, values, median), y = values, fill = reservoir)) +\n  geom_boxplot(outlier.color = \"red\", outlier.size = 1.5) +\n  coord_flip() +\n  labs(title = \"Distribution of Water Storage by Reservoir\",\n       subtitle = \"Red points indicate statistical outliers\",\n       x = \"Reservoir\",\n       y = \"Storage (Billions of Gallons)\") +\n  theme_minimal() +\n  theme(legend.position = \"none\",\n        plot.title = element_text(face = \"bold\", size = 14)) +\n  scale_fill_brewer(palette = \"Set2\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\nSuspicious 2024 data. Further investigation would be needed to work out if something was off with measurements or if this reflects genuinely dramatic changes in storage.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(storage_data |> filter(reservoir != \"Rondout\" | values < 60), \n       aes(x = month, y = values, group = factor(year), color = factor(year))) +\n  geom_line(alpha = 0.5, linewidth = 1.5) +\n  facet_wrap(~reservoir, scales = \"free_y\", ncol = 2) +\n  labs(title = \"Seasonal Storage Patterns by Year\",\n       subtitle = \"Each line represents one year (Rondout outliers removed)\",\n       group = \"Year\", color = \"Year\",\n       x = \"Month\",\n       y = \"Storage (Billions of Gallons)\") +\n  theme_minimal() +\n  theme(plot.title = element_text(face = \"bold\", size = 14),\n        strip.text = element_text(face = \"bold\"),\n        axis.text.x = element_text(angle = 45, hjust = 1)) +\n  scale_color_viridis_d()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}